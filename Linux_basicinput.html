標準出力とパーミション

入出力のゴール
仕組みを理解し、複数のコマンドを連携できるようになること



標準入出力について(入力、出力、エラー出力)
標準入力 → コマンド実行 → 標準出力
*デフォルトのことを標準という

入力      PCに対しデータを渡す行為(デフォルトではキーボード)ファイル
出力      内容に応じた実行結果を表示(デフォルトではディスプレイ)ファイル
エラー出力 エラーメッセージを出力する
*Linuxではコマンドの入出力先を抽象化することで入出力先を柔軟に変更できる
→ lsコマンドの結果をlessコマンドで確認できるなど(別コマンドの結果を入力先としたりできる)

-----------------------------------------------------------

リダイレクトについて
入出力先を変更する機能のこと

入力の場合  (同じ処理を何度もする場合によい)
cat < /etc/hosts
hostsファイルを入力元とし、それをcatコマンドに渡し出力している

出力の場合  (結果をファイルに保存できる)
ls > output.txt、cat > output.txt
出力結果をoutput.txtに保存している

エラー出力の場合(出力とエラー出力は別で、エラーは2>を使う)
ls /hoge 2> error.txt  (エラー結果がerror.txtに保存されるようになる)

標準入出力の数値(数値によって識別している)
標準入力 0      標準出力 1      標準エラー出力 2(1までは省略できるが2は明記しないといけない)

出力とエラー出力をまとめる
ls / /hoge > output.txt 2&1

リダイレクトで追記する
echo Hello! >> output.txt(>だけだと上書きされちゃう)

-----------------------------------------------------------

/dev/nullってなに？
入力先として指定しても何も返さず、出力先として指定してもデータは消え表示されないスペシャルファイル

入力先として指定
入力が何もない状態になり、コマンドのテストなどで入力をカラにしたい時などに使う

出力先として指定
結果が大量にあり、結果を非表示にしたい時に使用する
→ 結果が既にわかっている時に有効

-----------------------------------------------------------


パイプラインって何？(コマンド|コマンド)
複数のコマンドを連携させる機能。コマンドの出力結果を別コマンドの標準入力にする

ls / bin | less
ls / bin | grep systemd | less (lsでデータ参照し、grepでデータを絞り、lessで結果を表示)

-----------------------------------------------------------

パーミッションとはファイルの権限管理のこと
Linuxは複数ユーザーが使用するように設計されている。
予期せぬトラブルを防ぐために、個々人ごとにアクセス権限が設けられている

パーミッションのゴール
ファイルのオーナーとグループの概念を理解する。
ファイルの権限を確認・設定できるようになる。
管理者権限でコマンドを実行できるようになる。

-----------------------------------------------------------

ファイルのオーナーとグループ
ファイルには全てオーナーとグループが設定されていて、権限管理されている。

前提
1ユーザーごとに1アカウントある
オーナー    ファイルの所有者
グループ    ファイルの所有グループを指し、ユーザーをグループに加え、グループ単位で権限を与え、複数ユーザーを一括して管理している。


ファイルのパーミッションについて
ファイルやディレクトリを誰がどのように操作できるか定めたもの。

確認方法
ls -l
-rwx      r-xr     -x. 1 root root 158240 7月 31 2015/bin/less
オーナー  グループ   その他ユーザー
詳細
パーミッションの記号  r(read)  w(write)  x(execute)
*オーナー、グループ、その他にて、それぞれの権限が3桁にて表示。権限ない場合は-で表記

-----------------------------------------------------------

chmodコマンド(change mode)
chmod (ugoa) (+-=) (rwz) (ファイル名)

詳細
u(所有者権限) g(グループ権限) o(その他のグループ権限) a(全員)
+(権限を追加) -(権限を削除) =(記載した権限にする)
例 chmod u+r file       相対指定

chmod(数値で指定)
chmod(八進数の数値)(ファイル名)
パーミッションの記号  r(read)4  w(write)2  x(execute)1
オーナー(rwx 421 7)、グループ(r-x 41 5)、その他(r-x 41 5)にて、それぞれの権限が3桁にて表示。権限ない場合は-で表記
例 chmod 755 file       絶対指定    (755のパターンはよく使われる)

-----------------------------------------------------------

スーパーユーザー(sudo コマンド)switch user do
管理者権限を持つ特別なユーザー(ルートユーザー)
システムの根幹に関わる権限を誰もが持つのは危険なため、そういった作業はスーパーユーザーの権限者だけができるようにしている。

例 sudo mkdir /storage (ルートディレクトリ直下の変更は、ルートユーザーしかできない)
* yum install パッケージ名      (パッケージのインストール方法)
